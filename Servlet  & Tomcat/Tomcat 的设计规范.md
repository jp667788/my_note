### 组件化可配置

- 面向接口编程。需要对系统的功能按照“高内聚、低耦合”的原则进行拆分，每个组件都有相应的接口，组件之间通过接口通信，这样就可以方便地替换组件了

- Web 容器提供一个载体把组件组装在一起工作。Server 就是组件的载体，Server 里包含了连接器组件和容器组件；容器还需要把请求交给各个子容器组件去处理。

### 组件的创建

- 组件是需要配置，在启动之前，需要创建哪些对象是不确定的，所以需要通过[[9. 反射]]的方式来创建对象。

- 创建组件对象是通过 Class.forName 来创建，Tomcat 提供了自己的类加载器

### 组件的生命周期管理


- 父组件负责子组件的创建、启动、停止、销毁，启动了上层容器，下层容器就启动了，实现了一键式启停。
- 定义了生命周期的状态，并且把生命周期状态的变化定义成事件，一个组件状态的变换触发子组件状态变化


### 组件的骨架抽象类和模板模式

Tomcat 中 ProtocolHandler 接口，ProtocolHandler 有抽象基类 AbstractProtocol，它实现了协议处理层的骨架和通用逻辑，而具体协议也有抽象基类，比如 HttpProtocol 和 AjpProtocol。对于 Jetty 来说，Handler 接口之下有 AbstractHandler，Connector 接口之下有 AbstractConnector，这些抽象骨架类实现了一些通用逻辑，并且会定义一些抽象方法，这些抽象方法由子类实现，抽象骨架类调用抽象方法来实现骨架逻辑
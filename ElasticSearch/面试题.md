
# 为什么使用倒排索引（而不是 B+）

- 倒排索引的字段往往很长，如果使用 B+ 树，树可能很深，导致 IO 增加
- 索引可能会失效
- 精度差  召回率低  


- FOR  RDM 


# 数据写入原理

- 内存写入 buffer （默认 JVM 大小的10%）
- 默认 每隔 1s 进行 refresh ： 写入 index segment file。此时未同步磁盘，但此次写请求已完成，可以用于查询。间隔决定了写入es后，数据需等待多长时间才能读取



# 搜索速度调优

- 禁用 swap
- 使用 filter 代替 query (避免评分)
- 避免深度分页。 scroll search 和 search after
- 避免使用稀疏数据
- 避免单索引业务耦合
- 冷热分离的架构设计